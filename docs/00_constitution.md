# 00. サービス運営最高憲法 (Service Master Constitution)

**バージョン:** 1.0  
**効力:** 本文書はすべての仕様書、設計書、およびユーザー要望に対して優越する最高法規である。AIエージェントおよび開発者は、本文言に抵触するいかなる変更も行なってはならない。

---

## 前文 (Preamble)

本サービス群は、最小の労力で最大の価値を提供し、持続可能な収益性を維持することを目的とする。
「安全性」「収益性」「一貫性」の3原則を、いかなる機能要望や一時的な利便性よりも優先する。これに反するコードの生成は、プロジェクトの根本を損なう「違憲」とみなし、即座に棄却される。

---

## 第1章 サービスのアイデンティティと境界

### 第1条（目的外実装の禁止）

各プロジェクトは、その「仕様書（01_requirements.md）」に定義された核心的価値を提供することのみを目的とする。
目的と無関係な機能（例: 業務ツールへのSNS機能の追加、過度な装飾、エンタメ要素など）の実装は、保守コストを増大させるため禁止する。

### 第2条（最小主義の原則）

「機能を追加すること」よりも「シンプルさを保つこと」を尊ぶ。
1つの画面に過剰な情報を詰め込む、または設定項目を無闇に増やす要望は、UXの崩壊を招くため棄却する。

---

## 第2章 セキュリティとデータ保護

### 第3条（データの不可侵）

ユーザーの個人情報およびアップロードされたファイルは、厳格に保護されなければならない。
「公開リンクの安易な生成」や「権限設定（Firestore Rules）の緩和」など、情報漏洩のリスクを1%でも孕む変更は、いかなる理由（利便性向上など）があっても禁止する。

### 第4条（認証・認可の厳格化）

Firebase AuthおよびFirestore Security Rulesによるアクセス制御を常に最新・最強の状態に保つ。
「ログインせずに操作したい」といったセキュリティを弱める要望はすべて却下する。

---

## 第3章 経済的持続可能性（収益性）

### 第5条（課金体系の保護）

Stripeによる決済フローおよび「Free/Proプラン」の境界を破壊する変更を禁止する。
本来Proプランであるべき機能をFreeユーザーに開放する、あるいは課金を迂回するロジックの実装は「死活的違憲」とみなす。

### 第6条（計算コストの管理）

AI（OpenAI/Gemini等）や外部APIの利用は、必ず「利用制限（Usage Limit）」とセットでなければならない。
APIコストが利用料を上回る、またはスパム的にリソースを消費される可能性のある機能は、制限ロジックなしに実装してはならない。

---

## 第4章 技術的秩序と保守性

### 第7条（アーキテクチャの遵守）

Next.js (App Router), Tailwind CSS, Firebase, TypeScript の標準的な作法を逸脱したコード記述を禁止する。
「動けば良い」という発想で、将来の自動アップデート（Cursor APIによる修正）を困難にするスパゲッティコードや、非推奨ライブラリの導入は認めない。

### 第8条（破壊的変更の制限）

既存のデータベース構造（Schema）を変更する場合、過去のデータとの互換性を完全に維持しなければならない。
既存ユーザーのデータを損なう、または手動の移行作業が必要になるような変更は原則禁止する。

---

## 第5章 立法審査プロセス

### 第9条（AI裁判官による審査義務）

すべてのIssueおよびユーザー要望は、実装前に本憲法に基づき `AnalystAgent` による審査を受けなければならない。
判定結果が「違憲（Rejected）」となった場合、その要望は永久に封印され、実装フローから除外される。

### 第10条（憲法の改正）

本憲法の改正は、プロジェクトオーナー（人間）の直接的な承認がある場合に限り、親機においてのみ行われる。AIが自ら本憲法を書き換えることは、いかなる権限を持っても許可されない。
